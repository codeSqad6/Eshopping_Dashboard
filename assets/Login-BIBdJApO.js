import{y as l,r as i,u as y,j as s}from"./index-m2WN69Gn.js";import{C as g,a as p,b as w}from"./Widgets-G_CLHZSu.js";import{a as b}from"./index-Dq7h7Pqt.js";import{C as u,a as h}from"./CRow-DpNoAUXN.js";import{C as k}from"./CCardGroup-DAPR5E6j.js";import{C as v,a as N}from"./CCardBody-NlAPS5Ni.js";import{C as S}from"./CForm-CZ16jTtv.js";import{C as x,a as c}from"./CInputGroupText-DFPWjv_v.js";import{c as I}from"./cil-user-Ddrdy7PS.js";import{C}from"./CFormInput-QcXHuxzN.js";import{c as L}from"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-DSO9el11.js";import"./CFormControlValidation-BPDUFfh1.js";import"./CFormLabel-CdItCwC-.js";const E="/api",P=async r=>{var n,t;try{const e=await b.post(`${E}/Auth/login`,r,{headers:{"Content-Type":"application/json"}}),o=(n=e.data)==null?void 0:n.token;return o&&sessionStorage.setItem("token",o),e.data}catch(e){throw l.error(((t=e.response)==null?void 0:t.data)||e.message),e}},K=()=>{const[r,n]=i.useState(""),[t,e]=i.useState(""),[o,j]=i.useState(!1),m=y();i.useEffect(()=>{sessionStorage.getItem("token")&&(console.log("yes"),m("/dashboard"))},[]);const f=async a=>{a.preventDefault();try{const A=await P({email:r,password:t});l.success("Admin ! Welcome back "),m("/dashboard")}catch(d){l.error(d)}};return s.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:s.jsx(g,{children:s.jsx(u,{className:"justify-content-center",children:s.jsx(h,{md:8,children:s.jsx(k,{children:s.jsx(v,{className:"p-4",children:s.jsx(N,{children:s.jsxs(S,{onSubmit:f,children:[s.jsx("h1",{children:"Login"}),s.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),s.jsxs(x,{className:"mb-3",children:[s.jsx(c,{children:s.jsx(p,{icon:I})}),s.jsx(C,{type:"email",placeholder:"Email",autoComplete:"email",value:r,onChange:a=>n(a.target.value)})]}),s.jsxs(x,{className:"mb-4",children:[s.jsx(c,{children:s.jsx(p,{icon:L})}),s.jsx(C,{type:o?"text":"password",placeholder:"Password",autoComplete:"current-password",value:t,onChange:a=>e(a.target.value)}),s.jsx(c,{style:{cursor:"pointer"},onClick:()=>j(!o),children:s.jsx("i",{className:`fa-solid ${o?"fa-eye-slash":"fa-eye"}`})})]}),s.jsx(u,{children:s.jsx(h,{xs:6,children:s.jsx(w,{type:"submit",color:"primary",className:"px-4",children:"Login"})})})]})})})})})})})})};export{K as default};
