import{r as m,j as e,y as p,u as U}from"./index-C2VTKE24.js";import{a as E}from"./index-Dq7h7Pqt.js";import{o as b,p as y,q as N,T as d,r as S,B as A}from"./DefaultLayout-DEE2c3jP.js";/* empty css                             */import"./Widgets-D26OtlnG.js";const F=({open:g,onClose:c,onSave:x,initialData:r})=>{const[n,i]=m.useState({nameEn:"",nameAr:"",descriptionEn:"",descriptionAr:"",linkurl:"",order:"",status:""});m.useEffect(()=>{r&&i({id:r.id||"",nameEn:r.nameEn||"",nameAr:r.nameAr||"",descriptionEn:r.description||"",descriptionAr:r.descriptionAr||"",linkurl:r.linkurl||"",order:r.order||"",status:r.isActive?"true":"false",image:null})},[r]);const l=h=>{const{name:t,value:s,type:u,files:j}=h.target;i(u==="file"?f=>({...f,[t]:j[0]}):f=>({...f,[t]:s}))},v=async()=>{var h;if(n.nameEn)try{const t=sessionStorage.getItem("token"),s=new FormData;if(n.image&&n.image instanceof File)s.append("Image",n.image);else{p.error("Please upload a valid image");return}s.append("Title",n.nameEn),s.append("TitleAr",n.nameAr),s.append("Description",n.descriptionEn||""),s.append("DescriptionAr",n.descriptionAr||""),s.append("LinkUrl",n.linkurl||""),s.append("Order",n.order||""),s.append("IsActive",n.status);const u=await E.post("http://test.smartsto0re.shop/api/Banner",s,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${t}`}});p.success("Banner added successfully!"),console.log(u.data),x(u.data),c()}catch(t){console.error("❌ Error Response:",((h=t.response)==null?void 0:h.data)||t.message),p.error("Failed to add Banner. Check required fields.")}else p.error("Please fill required fields")};return e.jsxs(b,{open:g,onClose:c,children:[e.jsx(y,{children:"Add New Banner"}),e.jsxs(N,{children:[e.jsx(d,{label:"Banner Name Arabic",name:"nameAr",fullWidth:!0,margin:"dense",value:n.nameAr,onChange:l}),e.jsx(d,{label:"Banner Name English",name:"nameEn",fullWidth:!0,margin:"dense",value:n.nameEn,onChange:l}),e.jsx(d,{className:"mt-4",label:"Upload Image",type:"file",name:"image",fullWidth:!0,margin:"dense",onChange:l,InputLabelProps:{shrink:!0}}),e.jsx(d,{label:"Description English",name:"descriptionEn",fullWidth:!0,margin:"dense",multiline:!0,rows:4,value:n.descriptionEn,onChange:l}),e.jsx(d,{label:"Description Arabic",name:"descriptionAr",fullWidth:!0,margin:"dense",multiline:!0,rows:4,value:n.descriptionAr,onChange:l}),e.jsx(d,{label:"Banner linkurl",name:"linkurl",fullWidth:!0,margin:"dense",value:n.linkurl,onChange:l}),e.jsx(d,{label:"Banner order",name:"order",fullWidth:!0,margin:"dense",value:n.order,onChange:l}),e.jsxs(d,{select:!0,label:"Select status",name:"status",fullWidth:!0,margin:"normal",value:n.status,onChange:h=>{const t=h.target.value==="true";i(s=>({...s,status:t}))},SelectProps:{native:!0},children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]}),e.jsxs(S,{children:[e.jsx(A,{onClick:c,children:"Cancel"}),e.jsx(A,{onClick:v,variant:"contained",children:"Add"})]})]})},O=({open:g,onClose:c,onSave:x,initialData:r})=>{var h;const[n,i]=m.useState({nameEn:"",nameAr:"",descriptionEn:"",descriptionAr:"",linkurl:"",order:"",image:null,status:"true",imageUrl:""});m.useEffect(()=>{g&&r&&i({nameEn:r.title||"",nameAr:r.title||"",descriptionEn:r.description||"",descriptionAr:r.description||"",linkurl:r.linkUrl||"",order:r.order||"",image:null,status:r.isActive?"true":"false",imageUrl:r.imageUrl||"",id:r.id})},[g,r]);const l=t=>{const{name:s,value:u,type:j,files:f}=t.target;i(j==="file"?B=>({...B,image:f[0]}):B=>({...B,[s]:u}))},v=async()=>{if(!n.nameEn){p.error("Please fill required fields");return}try{const t=new FormData;t.append("Title",n.nameEn),t.append("TitleAr",n.nameAr),t.append("Description",n.descriptionEn),t.append("DescriptionAr",n.descriptionAr),t.append("LinkUrl",n.linkurl),t.append("Order",n.order),t.append("IsActive",n.status==="true"),n.image instanceof File&&t.append("Image",n.image);const s=sessionStorage.getItem("token"),u=await E.put(`http://test.smartsto0re.shop/api/Banner/${n.id}`,t,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"multipart/form-data"}});p.success("Banner updated successfully"),x==null||x(u.data),c()}catch(t){console.error(t),p.error("Failed to update Banner")}};return e.jsxs(b,{open:g,onClose:c,fullWidth:!0,maxWidth:"sm",children:[e.jsx(y,{children:"Edit Banner"}),e.jsxs(N,{children:[e.jsx(d,{label:"Banner Name Arabic",name:"nameAr",fullWidth:!0,margin:"dense",value:n.nameAr,onChange:l}),e.jsx(d,{label:"Banner Name English",name:"nameEn",fullWidth:!0,margin:"dense",value:n.nameEn,onChange:l}),((h=n.imageUrl)==null?void 0:h.length)>0&&e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("img",{src:`http://test.smartsto0re.shop${n.imageUrl}`,alt:"Product",style:{width:"100px",borderRadius:"6px"}})}),e.jsx("label",{style:{display:"block",marginTop:"1rem"},children:"Upload New Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:l,style:{marginBottom:"1rem"}}),e.jsx(d,{label:"Description English",name:"descriptionEn",fullWidth:!0,margin:"dense",multiline:!0,rows:4,value:n.descriptionEn,onChange:l}),e.jsx(d,{label:"Description Arabic",name:"descriptionAr",fullWidth:!0,margin:"dense",multiline:!0,rows:4,value:n.descriptionAr,onChange:l}),e.jsx(d,{label:"Banner linkurl",name:"linkurl",fullWidth:!0,margin:"dense",value:n.linkurl,onChange:l}),e.jsx(d,{label:"Banner order",name:"order",fullWidth:!0,margin:"dense",value:n.order,onChange:l}),e.jsxs(d,{select:!0,label:"Select status",name:"status",fullWidth:!0,margin:"normal",value:n.status,onChange:l,SelectProps:{native:!0},children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]})]}),e.jsxs(S,{children:[e.jsx(A,{onClick:c,children:"Cancel"}),e.jsx(A,{onClick:v,variant:"contained",children:"Save Changes"})]})]})},$=({open:g,onClose:c,onConfirm:x,Banner:r})=>{const n=async()=>{try{const i=sessionStorage.getItem("token"),l=await E.delete(`http://test.smartsto0re.shop/api/Banner/${r.id}`,{headers:{Authorization:`Bearer ${i}`}});p.success("Banner deleted successfully"),x(r.id),c()}catch(i){console.error("❌ Error deleting Banner:",i),p.error("Failed to delete Banner")}};return e.jsxs(b,{open:g,onClose:c,className:"delete-dialog",children:[e.jsx(y,{children:"Confirm Deletion"}),e.jsxs(N,{children:["Are you sure you want to delete ",e.jsx("strong",{children:(r==null?void 0:r.name)||"this Banner"}),"?"]}),e.jsxs(S,{children:[e.jsx(A,{onClick:c,color:"inherit",children:"Cancel"}),e.jsx(A,{onClick:n,color:"error",variant:"contained",children:"Delete"})]})]})};function _(){U();const[g,c]=m.useState(!1),[x,r]=m.useState(!1),[n,i]=m.useState(!1),[l,v]=m.useState(null),[h,t]=m.useState(null),[s,u]=m.useState([]),[j,f]=m.useState(1),B=5,k=Math.ceil(s.length/B),I=j*B,w=I-B,W=s.slice(w,I);m.useEffect(()=>{(async()=>{try{const o=sessionStorage.getItem("token"),C=await E.get("http://test.smartsto0re.shop/api/Banner",{headers:{Authorization:`Bearer ${o}`}});u(C.data)}catch(o){console.error("❌ Error fetching Banners:",o),p.error("Failed to bring the Banners.")}})()},[]);const D=a=>{u(o=>[...o,a])},P=a=>{u(s.map(o=>o.id===a.id?a:o))},T=a=>{u(o=>o.filter(C=>C.id!==a)),i(!1),v(null)};return console.log(W,"currentBanners"),e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"header",children:[e.jsx("p",{children:"Add a New Banners"}),e.jsx(A,{variant:"contained",color:"primary",onClick:()=>c(!0),children:"Add Banner"})]}),e.jsxs("table",{className:"Banners_table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Image"}),e.jsx("th",{children:"NameEn"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Edit"}),e.jsx("th",{children:"Delete"})]})}),e.jsx("tbody",{children:W.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{className:"image",src:`http://test.smartsto0re.shop${a.imageUrl}`,alt:a.name})}),e.jsx("td",{children:a.title}),e.jsx("td",{children:e.jsx("span",{className:a.isActive===!0?"active":"inactive",children:a.isActive?"Active":"Inactive"})}),e.jsx("td",{children:e.jsx("button",{className:"button editButton",onClick:()=>{t(a),r(!0)},children:e.jsx("i",{className:"fas fa-edit"})})}),e.jsx("td",{children:e.jsx("button",{className:"button deleteButton",onClick:()=>{v(a),i(!0)},children:e.jsx("i",{className:"fas fa-trash"})})})]},a.id))})]}),e.jsxs("div",{className:"pagination",children:[e.jsx("button",{className:"pageBtn",onClick:()=>f(a=>Math.max(a-1,1)),disabled:j===1,children:"<<"}),[...Array(k)].map((a,o)=>e.jsx("button",{className:`pageBtn ${j===o+1?"pageBtnActive":"pageBtnInactive"}`,onClick:()=>f(o+1),children:o+1},o)),e.jsx("button",{className:"pageBtn",onClick:()=>f(a=>Math.min(a+1,k)),disabled:j===k,children:">"})]}),e.jsx(F,{open:g,onClose:()=>c(!1),onSave:D}),e.jsx(O,{open:x,onClose:()=>r(!1),onSave:P,initialData:h}),e.jsx($,{open:n,className:"delete-dialog",onClose:()=>i(!1),onConfirm:T,Banner:l})]})}export{_ as default};
