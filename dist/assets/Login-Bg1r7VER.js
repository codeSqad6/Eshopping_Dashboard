import{y as l,r as i,u as y,j as s}from"./index-CNnMMEwx.js";import{C as g,a as p,b as w}from"./Widgets-DdEXSNNl.js";import{a as b}from"./index-Dq7h7Pqt.js";import{C as h,a as u}from"./CRow-B_9vwYnx.js";import{C as k}from"./CCardGroup-e0QTmyOB.js";import{C as v,a as N}from"./CCardBody-BaNb1ccj.js";import{C as S}from"./CForm-DUmFeu0C.js";import{C as x,a as c}from"./CInputGroupText-BqNJhoBj.js";import{c as I}from"./cil-user-Ddrdy7PS.js";import{C}from"./CFormInput-BuIwSJ8n.js";import{c as L}from"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-ETPybp6V.js";import"./CFormControlValidation-NanghiBX.js";import"./CFormLabel-LX2vb2Qu.js";const E="http://test.smartsto0re.shop/api",P=async r=>{var n,a;try{const e=await b.post(`${E}/Auth/login`,r,{headers:{"Content-Type":"application/json"}}),o=(n=e.data)==null?void 0:n.token;return o&&sessionStorage.setItem("token",o),e.data}catch(e){throw l.error(((a=e.response)==null?void 0:a.data)||e.message),e}},K=()=>{const[r,n]=i.useState(""),[a,e]=i.useState(""),[o,j]=i.useState(!1),m=y();i.useEffect(()=>{sessionStorage.getItem("token")&&(console.log("yes"),m("/dashboard"))},[]);const f=async t=>{t.preventDefault();try{const A=await P({email:r,password:a});l.success("Admin ! Welcome back "),m("/dashboard")}catch(d){l.error(d)}};return s.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:s.jsx(g,{children:s.jsx(h,{className:"justify-content-center",children:s.jsx(u,{md:8,children:s.jsx(k,{children:s.jsx(v,{className:"p-4",children:s.jsx(N,{children:s.jsxs(S,{onSubmit:f,children:[s.jsx("h1",{children:"Login"}),s.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),s.jsxs(x,{className:"mb-3",children:[s.jsx(c,{children:s.jsx(p,{icon:I})}),s.jsx(C,{type:"email",placeholder:"Email",autoComplete:"email",value:r,onChange:t=>n(t.target.value)})]}),s.jsxs(x,{className:"mb-4",children:[s.jsx(c,{children:s.jsx(p,{icon:L})}),s.jsx(C,{type:o?"text":"password",placeholder:"Password",autoComplete:"current-password",value:a,onChange:t=>e(t.target.value)}),s.jsx(c,{style:{cursor:"pointer"},onClick:()=>j(!o),children:s.jsx("i",{className:`fa-solid ${o?"fa-eye-slash":"fa-eye"}`})})]}),s.jsx(h,{children:s.jsx(u,{xs:6,children:s.jsx(w,{type:"submit",color:"primary",className:"px-4",children:"Login"})})})]})})})})})})})})};export{K as default};
